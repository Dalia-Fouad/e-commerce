import{a as T}from"./chunk-OGPXQLBF.js";import{a as N,b as c,c as k,d as M,h as A,i as q,j as D,k as R,m as G}from"./chunk-Z6CYM7GD.js";import{g as b,h as L}from"./chunk-QD6CZ7NI.js";import{$ as F,Ab as m,Bb as w,Hb as E,Kb as x,Ma as s,Y as f,bb as g,db as v,hb as p,hc as y,lb as l,mb as i,nb as C,sb as S,tb as h}from"./chunk-7M6V4D3V.js";var V=(e,n)=>({"is-valid":e,"is-invalid":n});function B(e,n){e&1&&(l(0,"p",14),m(1,"email is required"),i())}function I(e,n){e&1&&(l(0,"p",14),m(1,"Enter Valid Email "),i())}function P(e,n){if(e&1&&(l(0,"div",8),g(1,B,2,0,"p",14)(2,I,2,0),i()),e&2){let a,o=h();s(),p(1,(a=o.loginForm.get("email"))!=null&&a.getError("required")?1:(a=o.loginForm.get("email"))!=null&&a.getError("email")?2:-1)}}function j(e,n){e&1&&(l(0,"p",14),m(1,"password is required"),i())}function U(e,n){e&1&&(l(0,"p",14),m(1,"must be at least 6 chars"),i())}function $(e,n){if(e&1&&(l(0,"div",8),g(1,j,2,0,"p",14)(2,U,2,0),i()),e&2){let a,o=h();s(),p(1,(a=o.loginForm.get("password"))!=null&&a.getError("required")?1:(a=o.loginForm.get("password"))!=null&&a.getError("pattern")?2:-1)}}function z(e,n){if(e&1&&(l(0,"div",13),m(1),i()),e&2){let a=h();s(),w(a.errorMessage)}}var Z=(()=>{let n=class n{constructor(){this._FormBuilder=f(R),this._AuthService=f(T),this._Router=f(b),this.errorMessage="",this.isloading=!1,this.loginForm=this._FormBuilder.group({email:[null,[c.required,c.email]],password:[null,[c.required,c.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginForm.valid?(this.isloading=!0,this._AuthService.setloginForm(this.loginForm.value).subscribe({next:o=>{console.log(o),console.log(o.token),this.errorMessage="",this.isloading=!1,localStorage.setItem("userToken",o.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:o=>{console.log(o.error.message),this.errorMessage=o.error.message,this.isloading=!1}})):this.loginForm.markAllAsTouched()}};n.\u0275fac=function(_){return new(_||n)},n.\u0275cmp=F({type:n,selectors:[["app-login"]],standalone:!0,features:[E],decls:21,vars:9,consts:[[1,"w-75","mx-auto","my-5"],[1,"card","shadow","w-75","mx-auto"],[1,"card-body","p-4"],[1,"text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-100","mt-1"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn-main","w-100","my-3",3,"disabled"],["routerLink","/forgotPassword",1,"link-primary","text-center","d-block",2,"cursor","pointer"],[1,"alert","alert-danger","w-50"],[1,"m-0"]],template:function(_,t){if(_&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3",3),m(4,"Login Now :"),i(),l(5,"form",4),S("ngSubmit",function(){return t.loginSubmit()}),l(6,"div",5)(7,"label",6),m(8,"email:"),i(),C(9,"input",7),g(10,P,3,1,"div",8),i(),l(11,"div",5)(12,"label",9),m(13,"password:"),i(),C(14,"input",10),g(15,$,3,1,"div",8),i(),l(16,"button",11),m(17,"Login "),i(),l(18,"a",12),m(19," Forgot Password ?"),i(),g(20,z,2,1,"div",13),i()()()()),_&2){let r,d,u;s(5),v("formGroup",t.loginForm),s(4),v("ngClass",x(6,V,!((r=t.loginForm.get("email"))!=null&&r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)),((r=t.loginForm.get("email"))==null?null:r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)))),s(),p(10,(d=t.loginForm.get("email"))!=null&&d.errors&&((d=t.loginForm.get("email"))!=null&&d.touched||(d=t.loginForm.get("email"))!=null&&d.dirty)?10:-1),s(5),p(15,(u=t.loginForm.get("password"))!=null&&u.errors&&((u=t.loginForm.get("password"))!=null&&u.touched||(u=t.loginForm.get("password"))!=null&&u.dirty)?15:-1),s(),v("disabled",t.isloading),s(4),p(20,t.errorMessage?20:-1)}},dependencies:[G,A,N,k,M,q,D,y,L]});let e=n;return e})();export{Z as LoginComponent};
